# Backend: целевая архитектура

- Модель:
- Домены: device, plant, pump, sensor, journal, auth, user, advisor
- common: стабильные типы, общие DTO, утилиты, инфраструктурный wiring/config
- Адаптеры: REST API и MQTT

Определение домена:
Домен = public Facade в корне пакета + собственные contract/engine/jpa подпакеты.

- Домены и ответственность:
- device: устройства, идентификация, статусы и shadow.
- plant: растения и их жизненный цикл.
- pump: управление насосами и ручной полив.
- sensor: датчики и показания.
- journal: журнал действий/событий/истории.
- auth: аутентификация и авторизация (токены, методы входа, SSO).
- user: пользователи, профиль и админка пользователей.
- advisor: система запроса рекомендаций у ИИ сервера

Инфраструктура:
- DB (JPA) внутри доменов.
- MQTT publisher/subscriber - инфраструктура доменов через Facade.
- shadow/ack - кэши/хранилища производных состояний доменов.