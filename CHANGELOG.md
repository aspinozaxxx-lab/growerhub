# Changelog

В этом файле фиксируются изменения проекта. Используем формат Keep a Changelog и Semantic Versioning.

## [2025-10-24]

### Добавлено
- Добавлены проверки состояния DeviceShadowStore перед start/stop в API ручного полива (409 при неверном статусе).
- Добавлен эндпоинт GET /api/manual-watering/wait-ack для мягкого ожидания подтверждения команд.
- Добавлены поля is_online и last_seen_at в GET /api/manual-watering/status.
- Введён настраиваемый порог DEVICE_ONLINE_THRESHOLD_S (по умолчанию 10 с).
- Обновлены тесты статуса устройств на сценарии онлайн/офлайн.

### Изменено
- Улучшено логирование и обработка ошибок в MQTT-публикации и тестах API ручного полива.

### Исправлено
- Устранены проблемы с сохранением remaining_s и синхронизацией ACK в тестах.

## [2025-10-23]

### Добавлено
- Начальная настройка прошивки и вспомогательных скриптов (firmware/config.ini, scripts/post_upload.py и др.).

### Изменено
- Настроена работа с EEPROM в прошивке и интеграция с SPIFFS.

### Исправлено
- Скорректированы API Wi-Fi и OTA для поддержки новых сценариев прошивки.
