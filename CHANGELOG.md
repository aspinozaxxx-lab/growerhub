# Changelog

## [2025-11-02] FastAPI package rename
- refactor(server): pereimenovan katalog app/api v app/fastapi, vse importy obnovleny
- pytest: 32 passed

## [2025-11-02] MQTT package move
- refactor(server): perenos paketa mqtt iz app/api/routers/ v app/ s ispravleniem importov
- pytest: 32 passed

## [2025-11-02] MQTT docs refresh
- docs(server/mqtt): dobavleny kommentarii i dokstringi bez izmeneniya logiki
- zachem: povyshenie chitaemosti, snizhenie bus-factora
- pytest: 32 passed

## [2025-11-02] MQTT cleanup
- ochistka prokladok MQTT, vse importy perevedeny na novyy paket
- pytest: 32 passed

## [2025-11-02] MQTT modules relocate
- refactor(server/mqtt): perenos v app/api/routers/mqtt s prokladkami dlya sovmestimosti
- peremeshcheny: mqtt/{__init__.py,config.py,interfaces.py,topics.py,serialization.py,store.py,client.py,router.py,lifecycle.py}; mqtt/handlers/{__init__.py,ack.py,device_state.py}
- obnovleny prokladki v server/app/api/routers/mqtt/* i server/device_shadow.py dlya sokhraneniya staryh importov bez lomki API
- riski: global'nye singltony init/shutdown i dvoinaya inic., mitigaciya cherez aliasy sys.modules + pytest 32 testa

## [2025-11-01] Cleanup warnings and improve API docs
- РЈСЃС‚СЂР°РЅРµРЅС‹ РёР»Рё РїРѕРґР°РІР»РµРЅС‹ 44 РїСЂРµРґСѓРїСЂРµР¶РґРµРЅРёСЏ (Deprecation/SQLAlchemy/Pydantic/Pytest).
- Р”РѕР±Р°РІР»РµРЅ pytest.ini СЃ С„РёР»СЊС‚СЂР°С†РёРµР№ Р»РёС€РЅРёС… РїСЂРµРґСѓРїСЂРµР¶РґРµРЅРёР№.
- README_API.md РґРѕРїРѕР»РЅРµРЅ С‚Р°Р±Р»РёС†РµР№ В«endpoint в†’ С„Р°Р№Р» СЂРѕСѓС‚РµСЂР°В».
- РўРµСЃС‚С‹ СѓСЃРїРµС€РЅРѕ РїСЂРѕС…РѕРґСЏС‚ Р±РµР· РІР°СЂРЅРёРЅРіРѕРІ.


## [2025-10-31] Tests fixed after router refactor
- РСЃРїСЂР°РІР»РµРЅС‹ РїСѓС‚Рё РёРјРїРѕСЂС‚РѕРІ РІ С‚РµСЃС‚Р°С… (`api_manual_watering` в†’ `app.fastapi.routers.manual_watering`).
- РЈРґР°Р»РµРЅС‹ СѓСЃС‚Р°СЂРµРІС€РёРµ С‚РµСЃС‚С‹, РЅРµР°РєС‚СѓР°Р»СЊРЅС‹Рµ РїРѕСЃР»Рµ СЂРµС„Р°РєС‚РѕСЂРёРЅРіР°.
- РўРµСЃС‚С‹ СѓСЃРїРµС€РЅРѕ РїСЂРѕС…РѕРґСЏС‚ РЅР° РІРµС‚РєРµ `origin/main`.

## [2025-10-31] FastAPI main cleanup
- Р—Р°РІРµСЂС€РµРЅР° С‡РёСЃС‚РєР° main.py: РёРјРїРѕСЂС‚-С‚Р°Р№Рј create_tables() СѓРґР°Р»С‘РЅ, РёРЅРёС†РёР°Р»РёР·Р°С†РёСЏ Р‘Р” С‚РµРїРµСЂСЊ РїСЂРѕРёСЃС…РѕРґРёС‚ РІ startup. РџРѕРІРµРґРµРЅРёРµ API Рё URL РЅРµРёР·РјРµРЅРЅС‹.


## [2025-10-31] FastAPI routers layout
- Р’С‹РЅРµСЃРµРЅС‹ HTTP-СЌРЅРґРїРѕР№РЅС‚С‹ РІ РѕС‚РґРµР»СЊРЅС‹Рµ СЂРѕСѓС‚РµСЂС‹: manual_watering.py, devices.py, history.py, firmware.py. Р’ main.py РѕСЃС‚Р°Р»РёСЃСЊ С‚РѕР»СЊРєРѕ С‚РѕС‡РєР° РІС…РѕРґР°, СЃРѕР±С‹С‚РёСЏ Рё СЃС‚Р°С‚РёРєР°. РљРѕРЅС‚СЂР°РєС‚С‹ Рё URL Р±РµР· РёР·РјРµРЅРµРЅРёР№.

## [2025-10-31] FastAPI smoke checks and docs
- РџСЂРѕРІРµСЂРµРЅС‹ С‚РµСЃС‚С‹/СЃРјРѕСѓРє-РїСЂРѕРІРµСЂРєР° РїРѕСЃР»Рµ РІС‹РЅРѕСЃР° СЂРѕСѓС‚РµСЂРѕРІ; РґРѕР±Р°РІР»РµРЅС‹ OpenAPI-С‚РµРіРё РґР»СЏ РіСЂСѓРїРїРёСЂРѕРІРєРё; РґРѕР±Р°РІР»РµРЅ README_API.md. РљРѕРЅС‚СЂР°РєС‚С‹ РЅРµ РёР·РјРµРЅСЏР»РёСЃСЊ.

## [2025-10-31] FastAPI startup safety net
- Р¦РµР»СЊ: РїРѕРґРіРѕС‚РѕРІРёС‚СЊ РїРµСЂРµРЅРѕСЃ РёРЅРёС†РёР°Р»РёР·Р°С†РёРё Р‘Р” РІ `startup`, РЅРµ Р»РѕРјР°СЏ С‚РµРєСѓС‰РёРµ С‚РµСЃС‚С‹ Рё РѕРєСЂСѓР¶РµРЅРёРµ.
- Р’СЃС‚Р°РІР»РµРЅ РґСѓР±Р»РёСЂСѓСЋС‰РёР№ РІС‹Р·РѕРІ `create_tables()` РІ `@app.on_event("startup")` СЃ Р±РµР·РѕРїР°СЃРЅС‹Рј Р»РѕРіРёСЂРѕРІР°РЅРёРµРј РїСЂРё РїРѕРІС‚РѕСЂРµ; РёРјРїРѕСЂС‚-time РІС‹Р·РѕРІ РѕСЃС‚Р°РІР»РµРЅ Р±РµР· РёР·РјРµРЅРµРЅРёР№.
- РЎРѕРІРјРµСЃС‚РёРјРѕСЃС‚СЊ API Рё С‚РµСЃС‚РѕРІ СЃРѕС…СЂР°РЅРµРЅР°.

## [2025-10-30] MQTT refactor вЂ” summary
- РџСЂРѕРІРµРґС‘РЅ РїРѕР»РЅС‹Р№ СЂРµС„Р°РєС‚РѕСЂРёРЅРі MQTT-РїРѕРґСЃРёСЃС‚РµРјС‹: РєРѕРґ РїРµСЂРµРЅРµСЃС‘РЅ РІ `server/app/api/routers/mqtt/`.
- Р Р°Р·РґРµР»РµРЅС‹ СѓСЂРѕРІРЅРё:
  - `topics.py`, `serialization.py`, `interfaces.py`, `config.py` вЂ” РїСЂРѕС‚РѕРєРѕР» Рё Р±Р°Р·РѕРІС‹Рµ С‚РёРїС‹.
  - `client.py`, `lifecycle.py` вЂ” РїСѓР±Р»РёРєР°С†РёСЏ Рё Р¶РёР·РЅРµРЅРЅС‹Р№ С†РёРєР» РєР»РёРµРЅС‚Р°.
  - `router.py`, `handlers/` вЂ” РјР°СЂС€СЂСѓС‚РёР·Р°С†РёСЏ Рё РѕР±СЂР°Р±РѕС‚С‡РёРєРё РїРѕРґРїРёСЃРѕРє.
  - `store.py` вЂ” СЃС‚РѕСЂС‹ РґР»СЏ ACK Рё С‚РµРЅРµРІС‹С… СЃРѕСЃС‚РѕСЏРЅРёР№.
- РћР±РЅРѕРІР»РµРЅС‹ РёРјРїРѕСЂС‚С‹ Рё С‚РµСЃС‚С‹, РґРѕРєСѓРјРµРЅС‚Р°С†РёСЏ `docs/manual_watering_protocol.md`.
- РџСЂРѕС‚РѕРєРѕР» MQTT Рё С„РѕСЂРјР°С‚С‹ JSON РЅРµ РёР·РјРµРЅСЏР»РёСЃСЊ.
- Р’СЃРµ С‚РµСЃС‚С‹ СѓСЃРїРµС€РЅРѕ РїСЂРѕС…РѕРґСЏС‚ (`pytest -q` Р·РµР»С‘РЅС‹Р№).

## [2025-10-30] MQTT refactor вЂ” step 8
- РЈРґР°Р»РµРЅС‹ СЃРѕРІРјРµСЃС‚РёРјС‹Рµ РјРѕРґСѓР»Рё server/mqtt_*.py, РІСЃРµ РёРјРїРѕСЂС‚С‹ РїРµСЂРµРІРµРґРµРЅС‹ РЅР° server/app/api/routers/mqtt.
- РћР±РЅРѕРІР»РµРЅС‹ server/app/main.py, С‚РµСЃС‚С‹ Рё РґРѕРєСѓРјРµРЅС‚Р°С†РёСЏ manual_watering РЅР° РЅРѕРІСѓСЋ Р°СЂС…РёС‚РµРєС‚СѓСЂСѓ.
- Р¦РµР»СЊ: Р·Р°РІРµСЂС€РёС‚СЊ РјРёРіСЂР°С†РёСЋ MQTT-СЃР»РѕСЏ, РѕСЃС‚Р°РІРёС‚СЊ РµРґРёРЅС‹Р№ СЃРµСЂРІРёСЃРЅС‹Р№ С„Р°СЃР°Рґ Рё Р°РєС‚СѓР°Р»СЊРЅСѓСЋ РґРѕРєСѓРјРµРЅС‚Р°С†РёСЋ.

## [2025-10-26] FastAPI MQTT lifecycle integration
- FastAPI startup/shutdown С‚РµРїРµСЂСЊ РёСЃРїРѕР»СЊР·СѓСЋС‚ С„Р°СЃР°РґС‹ app.mqtt.lifecycle РІРјРµСЃС‚Рѕ СЂСѓС‡РЅРѕРіРѕ РІС‹Р·РѕРІР° РїРѕРґРїРёСЃС‡РёРєРѕРІ.
- API manual_watering РїРµСЂРµРІРµРґС‘РЅ РЅР° app.mqtt.interfaces.IMqttPublisher Рё РЅРѕРІС‹Рµ СЃС‚РѕСЂР°Р¶Рё; С‚РµСЃС‚С‹ РїР°С‚С‡Р°С‚ lifecycle/store.

## [2025-10-26] MQTT serialization cleanup
- РЈРґР°Р»РµРЅС‹ РёР·Р±С‹С‚РѕС‡РЅС‹Рµ С„СѓРЅРєС†РёРё deserialize_* Рё С‚РµСЃС‚С‹ РїРµСЂРµРІРµРґРµРЅС‹ РЅР° РїСЂСЏРјРѕР№ model_validate_json.
- РЎРѕРІРјРµСЃС‚РёРјС‹Р№ РјРѕРґСѓР»СЊ mqtt_protocol.py Рё С‚РµСЃС‚С‹ РїСЂРёРІРµРґРµРЅС‹ Рє РЅРѕРІС‹Рј API, СЃС‚СЂРѕРєРё РѕС‚РІРµС‚РѕРІ РЅРѕСЂРјР°Р»РёР·РѕРІР°РЅС‹.

## [2025-10-26] MQTT store refactor (Ack/Shadow)
- AckStore Рё DeviceShadowStore РїРµСЂРµРЅРµСЃРµРЅС‹ РІ app/api/routers/mqtt/store.py СЃ РµРґРёРЅС‹Рј СѓРїСЂР°РІР»РµРЅРёРµРј РёРЅРёС†РёР°Р»РёР·Р°С†РёРµР№.
- lifecycle С‚РµРїРµСЂСЊ СѓРїСЂР°РІР»СЏРµС‚ Р·Р°РїСѓСЃРєРѕРј/РѕСЃС‚Р°РЅРѕРІРєРѕР№ СЃС‚РѕСЂР°Р¶РµР№ Рё РїРѕРґРїРёСЃС‡РёРєРѕРІ, API Рё С‚РµСЃС‚С‹ РїРµСЂРµРІРµРґРµРЅС‹ РЅР° РЅРѕРІС‹Рµ РёРјРїРѕСЂС‚С‹.
- Р”РѕРєС‚РµСЃС‚С‹/РѕР¶РёРґР°РЅРёСЏ РѕР±РЅРѕРІР»РµРЅС‹ РЅР° РЅРѕСЂРјР°Р»СЊРЅС‹Рµ СЃС‚СЂРѕРєРё РѕС€РёР±РѕРє Рё СЃРѕРІРјРµСЃС‚РёРјС‹Рµ РїР°С‚С‡Рё.

## [2025-10-26] MQTT router refactor (subscribers)

- Р›РѕРіРёРєР° РїРѕРґРїРёСЃС‡РёРєРѕРІ Рё РѕР±СЂР°Р±РѕС‚С‡РёРєРѕРІ РІС‹РЅРµСЃРµРЅР° РІ app/api/routers/mqtt/router.py Рё app/api/routers/mqtt/handlers/ (ACK/state, РїР°СЂСЃРёРЅРі С‚РѕРїРёРєРѕРІ Рё payload).
- app/api/routers/mqtt/lifecycle.py С‚РµРїРµСЂСЊ СѓРїСЂР°РІР»СЏРµС‚ Р·Р°РїСѓСЃРєРѕРј/РѕСЃС‚Р°РЅРѕРІРєРѕР№ РїРѕРґРїРёСЃС‡РёРєРѕРІ С‡РµСЂРµР· СЃС‚Р°СЂС‚/СЃС‚РѕРї С„Р°СЃР°РґС‹.
- server/mqtt_subscriber.py РѕСЃС‚Р°РІР»РµРЅ РєР°Рє СЃРѕРІРјРµСЃС‚РёРјР°СЏ РїСЂРѕРєР»Р°РґРєР° РґР»СЏ СЃС‚Р°СЂС‹С… РёРјРїРѕСЂС‚РѕРІ Рё С‚РµСЃС‚РѕРІ.

## [2025-10-26] MQTT service refactor (topics/serialization)

- Р’С‹РЅРµСЃР»Рё С€Р°Р±Р»РѕРЅС‹ С‚РѕРїРёРєРѕРІ, РјРѕРґРµР»Рё Рё СЃРµСЂРёР°Р»РёР·Р°С†РёСЋ MQTT РІ server/app/api/routers/mqtt/ (topics/serialization/interfaces/config), СЃРѕС…СЂР°РЅРёРІ С„РѕСЂРјР°С‚ payload.
- mqtt_subscriber, API Рё С‚РµСЃС‚С‹ РїРµСЂРµРІРµРґРµРЅС‹ РЅР° РЅРѕРІС‹Рµ РёРјРїРѕСЂС‚С‹, РґРѕР±Р°РІР»РµРЅ СЃРѕРІРјРµСЃС‚РёРјС‹Р№ СЂРµСЌРєСЃРїРѕСЂС‚ server/mqtt_protocol.py.
- РћР±РЅРѕРІРёР»Рё РґРѕСЃС‚СѓРї Рє MQTT-РЅР°СЃС‚СЂРѕР№РєР°Рј С‡РµСЂРµР· СЃРµСЂРІРёСЃРЅСѓСЋ РѕР±С‘СЂС‚РєСѓ Р±РµР· РёР·РјРµРЅРµРЅРёСЏ РїРѕРІРµРґРµРЅРёСЏ РёРЅРёС†РёР°Р»РёР·Р°С†РёРё.

## [2025-10-26] MQTT lifecycle refactor (publisher)

- Р РµР°Р»РёР·РѕРІР°РЅС‹ app/api/routers/mqtt/client.py (Р°РґР°РїС‚РµСЂ PahoMqttPublisher) Рё app/api/routers/mqtt/lifecycle.py СЃ С„Р°СЃР°РґРѕРј init/get/shutdown.
- server/mqtt_publisher.py Р·Р°РјРµРЅС‘РЅ С‚РѕРЅРєРѕР№ РїСЂРѕРєР»Р°РґРєРѕР№ СЃ TODO РЅР° СѓРґР°Р»РµРЅРёРµ; РїСЂРёР»РѕР¶РµРЅРёРµ Рё С‚РµСЃС‚С‹ РёСЃРїРѕР»СЊР·СѓСЋС‚ app.mqtt.lifecycle.
- РџРѕРІРµРґРµРЅРёРµ РїСѓР±Р»РёРєР°С†РёРё РєРѕРјР°РЅРґ, QoS Рё РѕР±СЂР°Р±РѕС‚РєР° РѕС€РёР±РѕРє РїРѕРґРєР»СЋС‡РµРЅРёСЏ СЃРѕС…СЂР°РЅРµРЅС‹, pytest РѕСЃС‚Р°С‘С‚СЃСЏ Р·РµР»С‘РЅС‹Рј.

## [2025-10-24] MQTT step 4

- РљРѕРЅС‚СЂРѕР»Р»РµСЂ РїСѓР±Р»РёРєСѓРµС‚ С‚РµРєСѓС‰РµРµ СЃРѕСЃС‚РѕСЏРЅРёРµ СѓСЃС‚СЂРѕР№СЃС‚РІР° РІ С‚РѕРїРёРє `gh/dev/ESP32_2C294C/state` СЃ `retain=true`: С‚СѓРґР° РїРѕРїР°РґР°РµС‚ Р±Р»РѕРє `manual_watering` (status, duration_s, started_at, correlation_id) Рё РІРµСЂСЃРёСЏ РїСЂРѕС€РёРІРєРё.
- РЎРѕСЃС‚РѕСЏРЅРёРµ РѕС‚РїСЂР°РІР»СЏРµС‚СЃСЏ РїРѕСЃР»Рµ Р·Р°РїСѓСЃРєР° Рё РѕСЃС‚Р°РЅРѕРІРєРё РїРѕР»РёРІР°, РїРѕСЃР»Рµ Р°РІС‚Рѕ-С‚Р°Р№РјР°СѓС‚Р° Рё РїСЂРё СѓСЃРїРµС€РЅРѕРј СЂРµРєРѕРЅРЅРµРєС‚Рµ MQTT, С‡С‚РѕР±С‹ СЃРµСЂРІРµСЂ РІСЃРµРіРґР° РІРёРґРµР» Р°РєС‚СѓР°Р»СЊРЅС‹Р№ СЃРЅРёРјРѕРє Рё РѕС‚РјРµС‡Р°Р» СѓСЃС‚СЂРѕР№СЃС‚РІРѕ РєР°Рє РѕРЅР»Р°Р№РЅ.
- РџРѕР»Рµ `started_at` РїРѕРєР° СЃРѕРґРµСЂР¶РёС‚ Р·Р°РіР»СѓС€РєСѓ `"1970-01-01T00:00:00Z"` РґРѕ РёРЅС‚РµРіСЂР°С†РёРё СЂРµР°Р»СЊРЅРѕРіРѕ UTC РІСЂРµРјРµРЅРё (NTP/RTC), Р·Р°РїР»Р°РЅРёСЂРѕРІР°РЅРЅРѕР№ РЅР° Р±СѓРґСѓС‰РёРµ С€Р°РіРё.
- Retained state РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ СЃРµСЂРІРµСЂРѕРј Рё С„СЂРѕРЅС‚РµРЅРґРѕРј (`/api/manual-watering/status`), С‡С‚РѕР±С‹ СЂР°Р·Р±Р»РѕРєРёСЂРѕРІР°С‚СЊ РєРЅРѕРїРєРё Рё РѕС‚РѕР±СЂР°Р¶Р°С‚СЊ РїСЂРѕРіСЂРµСЃСЃ СЂСѓС‡РЅРѕРіРѕ РїРѕР»РёРІР°.

## [2025-10-24] MQTT step 3

- Р”РѕР±Р°РІР»РµРЅР° РїСѓР±Р»РёРєР°С†РёСЏ ACK РІ MQTT-С‚РѕРїРёРє СѓСЃС‚СЂРѕР№СЃС‚РІР° `gh/dev/ESP32_2C294C/ack` РїРѕСЃР»Рµ РѕР±СЂР°Р±РѕС‚РєРё РєРѕРјР°РЅРґ СЂСѓС‡РЅРѕРіРѕ РїРѕР»РёРІР°.
- РџРѕСЃР»Рµ `pump.start` Рё `pump.stop` РєРѕРЅС‚СЂРѕР»Р»РµСЂ РѕС‚РІРµС‡Р°РµС‚ СЃ `correlation_id`, `result` Рё `status`, С‡С‚Рѕ РґР°С‘С‚ СЃРµСЂРІРµСЂСѓ РїРѕРґС‚РІРµСЂР¶РґРµРЅРёРµ РґР»СЏ С„СЂРѕРЅС‚РµРЅРґР° С‡РµСЂРµР· `/api/manual-watering/wait-ack`.
- РћС€РёР±РєРё С„РѕСЂРјР°С‚Р° (РЅР°РїСЂРёРјРµСЂ, РѕС‚СЃСѓС‚СЃС‚РІСѓРµС‚ `duration_s` РёР»Рё `type`) С‚РµРїРµСЂСЊ РІРѕР·РІСЂР°С‰Р°СЋС‚ `result=error` Рё РїРѕР»Рµ `reason` СЃ РѕРїРёСЃР°РЅРёРµРј РїСЂРѕР±Р»РµРјС‹.
- ACK РїСѓР±Р»РёРєСѓРµС‚СЃСЏ Р±РµР· retain, С‚Р°Рє РєР°Рє СЌС‚Рѕ РѕРґРЅРѕСЂР°Р·РѕРІРѕРµ РїРѕРґС‚РІРµСЂР¶РґРµРЅРёРµ; РїСѓР±Р»РёРєР°С†РёСЏ СЃРѕСЃС‚РѕСЏРЅРёСЏ СѓСЃС‚СЂРѕР№СЃС‚РІР° (state СЃ retain) Р±СѓРґРµС‚ РґРѕР±Р°РІР»РµРЅР° РЅР° СЃР»РµРґСѓСЋС‰РµРј С€Р°РіРµ.

## [2025-10-24] MQTT step 2

- Р РµР°Р»РёР·РѕРІР°РЅ СЂР°Р·Р±РѕСЂ JSON-РєРѕРјР°РЅРґ `pump.start` Рё `pump.stop`, РґРѕР±Р°РІР»РµРЅС‹ РїРѕРґСЂРѕР±РЅС‹Рµ Р»РѕРіРё РґР»СЏ РѕС‚Р»Р°РґРєРё С†РµРїРѕС‡РєРё СЃРµСЂРІРµСЂ в†’ СѓСЃС‚СЂРѕР№СЃС‚РІРѕ.
- РќР°СЃРѕСЃ СѓРїСЂР°РІР»СЏРµС‚СЃСЏ С‡РµСЂРµР· СЃСѓС‰РµСЃС‚РІСѓСЋС‰РёР№ РєРѕРЅС‚СЂРѕР»Р»РµСЂ СЂРµР»Рµ, СЃРѕС…СЂР°РЅСЏРµС‚СЃСЏ Р»РѕРєР°Р»СЊРЅРѕРµ СЃРѕСЃС‚РѕСЏРЅРёРµ (running/idle, duration_s, correlation_id) РґР»СЏ Р±СѓРґСѓС‰РёС… ACK/state.
- Р’ `loop()` РґРѕР±Р°РІР»РµРЅ Р°РІС‚РѕСЃС‚РѕРї РїРѕ С‚Р°Р№РјРµСЂСѓ `duration_s`, С‡С‚РѕР±С‹ РёСЃРєР»СЋС‡РёС‚СЊ Р·Р°С‚СЏР¶РЅРѕР№ РїРѕР»РёРІ РїСЂРё РїРѕС‚РµСЂРµ СЃРІСЏР·Рё.
- РџСѓР±Р»РёРєР°С†РёСЏ ACK Рё state Р·Р°РїР»Р°РЅРёСЂРѕРІР°РЅР° РЅР° СЃР»РµРґСѓСЋС‰РёРµ С€Р°РіРё (С€Р°Рі 3+).

## [2025-10-24] MQTT step 1

- Р”РѕР±Р°РІР»РµРЅРѕ Р±Р°Р·РѕРІРѕРµ РїРѕРґРєР»СЋС‡РµРЅРёРµ ESP32 Рє Wi-Fi (STA) Рё MQTT, РёСЃРїРѕР»СЊР·РѕРІР°РЅС‹ Р»РѕРіРёРЅ/РїР°СЂРѕР»СЊ Mosquitto Рё clientId `ESP32_2C294C`.
- РЈСЃС‚СЂРѕР№СЃС‚РІРѕ РїРѕРґРїРёСЃС‹РІР°РµС‚СЃСЏ РЅР° РєРѕРјР°РЅРґРЅС‹Р№ С‚РѕРїРёРє `gh/dev/ESP32_2C294C/cmd` (QoS=1), Р»РѕРіРёСЂСѓРµС‚ РІС…РѕРґСЏС‰РёРµ СЃРѕРѕР±С‰РµРЅРёСЏ РІ Serial Рё Р°РІС‚РѕРјР°С‚РёС‡РµСЃРєРё РїРµСЂРµРїРѕРґРєР»СЋС‡Р°РµС‚СЃСЏ РїСЂРё РѕР±СЂС‹РІРµ.
- РЈРїСЂР°РІР»РµРЅРёРµ РЅР°СЃРѕСЃРѕРј Рё РїСѓР±Р»РёРєР°С†РёСЏ ack/state РЅР°РјРµС‡РµРЅС‹ РЅР° РїРѕСЃР»РµРґСѓСЋС‰РёРµ С€Р°РіРё.
