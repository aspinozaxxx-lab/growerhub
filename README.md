üå± Smart Watering System
MVP –°–∏—Å—Ç–µ–º—ã –≤—ã—Ä–∞—â–∏–≤–∞–Ω–∏—è
–°–æ—Å—Ç–∞–≤ MVP:
* –§—É–Ω—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
* –ü—Ä–æ–¥—É–∫—Ç –≤ –∫–æ—Ä–ø—É—Å–µ —Å —Ä–∞–∑—å–µ–º–∞–º–∏ (3–¥ –ø–µ—á–∞—Ç—å)
* –£–ø–∞–∫–æ–≤–∫–∞: –∫–æ—Ä–æ–±–∫–∞ —Å–æ —Å—Ç–∏–∫–µ—Ä–æ–º
* –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è —á–∞—Å—Ç—å:
(–ë–ê–ó–ê)
** –º–∏–Ω–∏ –Ω–∞—Å–æ—Å,
** —Ä–µ–ª–µ 1 —à—Ç,
** –¥–∞—Ç—á–∏–∫ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ –ø–æ—á–≤—ã –Ω–∞ –∫–∞–±–µ–ª–µ —Å —Ä–∞–∑—å–µ–º–æ–º rj11
** —Ä–æ–∑–µ—Ç–∫–∞ –¥–ª—è –¥–∞—Ç—á–∏–∫–∞ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ –ø–æ—á–≤—ã rj11
** –∫–∞–±–µ–ª—å –ø–∏—Ç–∞–Ω–∏—è
(–ü–õ–Æ–°)
** —Ä–µ–ª–µ 2 —à—Ç
** —Ä–æ–∑–µ—Ç–∫–∞ –Ω–∞ –∫–æ—Ä–ø—É—Å–µ (–¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏)
* –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è —á–∞—Å—Ç—å:
** –°–µ—Ä–≤–µ—Ä FastAPI –¥–ª—è –ª–æ–≥–∏–∫–∏
** –í–µ–±-—Å–µ—Ä–≤–µ—Ä
** Firmware –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

–ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–¥–∞—á–∏:
Ó°ã –°–¥–µ–ª–∞—Ç—å —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ç–æ—Ç–∏–ø
–∫—É–ø–∏—Ç—å –¥–æ–º–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–≥–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ nginx –∫–∞–∫ reverse proxy + SSL
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
Ó°ã –°–æ–±—Ä–∞—Ç—å –∫–∞–±–µ–ª—å–Ω—ã–π –¥–∞—Ç—á–∏–∫ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏
Ó°ã –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫ –ø–æ–ª–∏–≤–∞–µ—Ç —Å –∫–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–∞–ø–µ–ª—å–Ω–∏—Ü–µ–π
Ó°ã –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –¥–∞—Ç—á–∏–∫ –ø–æ—á–≤—ã –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∫ —ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏–∏
Ó°ã –ù–∞–ø–µ—á–∞—Ç–∞—Ç—å –∫–æ—Ä–ø—É—Å –¥–ª—è –¥–∞—Ç—á–∏–∫–∞ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏
Ó°ä –°–æ–±—Ä–∞—Ç—å –º–∞–∫–µ—Ç –Ω–∞ –¥–æ—â–µ—á–∫–µ
Ó°ä –ù–∞–∑–Ω–∞—á–∞—Ç—å deviceID –æ—Ç –º–∞–∫ –∞–¥—Ä–µ—Å–∞
Ó°ã –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ. –°–¥–µ–ª–∞—Ç—å –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è –Ω–∞ —Å–∞–π—Ç–µ
Ó°ã –õ–æ–≥–∏ –æ –¥–µ–ø–ª–æ—è—Ö –≤—ã–≤–æ–¥–∏—Ç—å
Ó°ã –û—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—á–∫—É –¥–ª—è –ª–æ–≥–æ–≤ —Å–æ–∑–¥–∞—Ç—å
Ó°ã –†–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –æ—Ç–∫—É–¥–∞ –±–µ—Ä–µ—Ç—Å—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ -273 –≥—Ä–∞–¥—É—Å–∞. –ü–æ—á–µ–º—É –Ω–µ –≤–∏–¥–∏—Ç –¥–∞—Ç—á–∏–∫
Ó°ã –°–¥–µ–ª–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ä—É—á–Ω–æ–π –ø–æ–ª–∏–≤
Ó°ä –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—É—à —á–µ—Ä–µ–∑ vs code

Ó°ã –ù–∞ –ø–æ–¥—É–º–∞—Ç—å
Ó°ã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–∞–∑–Ω–æ–π –º–æ—â–Ω–æ—Å—Ç–∏ –Ω–∞—Å–æ—Å–æ–≤ –∏ —Ä–∞–±–æ—Ç—ã –æ—Ç –º–∞–≥–∏—Å—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è
Ó°ã –ù—É–∂–µ–Ω –ª–∏ –≥—Ä–æ—É–±–æ–∫—Å? –≠–∫–æ–Ω–æ–º–∏—è –Ω–∞ —Å–≤–µ—Ç–µ, –Ω–µ –ø–∞–ª–µ–≤–Ω–æ. –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ –º–∞—Å—Ç–µ—Ä—Å–∫—É—é
Ó°ã –ö–∞–∫ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, –ø–æ –ø–æ–º–µ—â–µ–Ω–∏—è–º
Ó°ã –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–æ–Ω —É –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü–æ –Ω–∞—Å–æ—Å—É –Ω–∞ –∑–æ–Ω—É –∏–ª–∏ –∫–ª–∞–ø–∞–Ω–∞?
Ó°ã –ö–∞–∫ –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

–ë–æ–ª—å—à–∏–µ –ø–ª–∞–Ω—ã:
–†–∞–∑–≤–∏—Ç–∏–µ –≤–µ–± –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:
  –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç —Å–æ —Å–≤–æ–∏–º–∏ —Ä–∞—Å—Ç–µ–Ω–∏—è–º–∏ –∏ –¥–∞—Ç—á–∏–∫–∞–º–∏
  –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–µ–± —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ–µ–∫—Ç–∞ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏ –ø–æ–ª–µ–∑–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∫–∏ –∞–≤—Ç–æ–ø–æ–ª–∏–≤–∞
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–∞ –¥–µ–π—Å—Ç–≤–∏–π - –¥–Ω–µ–≤–Ω–∏–∫ –≤—ã—Ä–∞—â–∏–≤–∞–Ω–∏—è
–ì—Ä–∞—Ñ–∏–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ –¥–µ–π—Å—Ç–≤–∏–π (–ø–æ—á–≤–∞, –≤–æ–∑–¥—É—Ö, –ø–æ–ª–∏–≤—ã)

**–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º—ã:**
ESP32: –ê–≤—Ç–æ–Ω–æ–º–Ω–æ–µ –≤—Ä–µ–º—è (RTC+NTP), EEPROM, DHT22, 2 —Ä–µ–ª–µ (–ø–æ–ª–∏–≤+—Å–≤–µ—Ç)
–°–µ—Ä–≤–µ—Ä: FastAPI + PostgreSQL + –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ systemd
–í–µ–±: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã/–≤–ª–∞–∂–Ω–æ—Å—Ç–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
–†–∞–±–æ—Ç–∞–µ—Ç: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–ª–∏–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ–º, OTA
–ê–≤—Ç–æ-–¥–µ–ø–ª–æ–π: GitHub webhook + systemd —Å–µ—Ä–≤–∏—Å—ã

–ê–†–•–ò–¢–ï–ö–¢–£–†–ê
ESP32: C++/PlatformIO, –ø–∏–Ω—ã: 34-–ø–æ—á–≤–∞, 4-–ø–æ–ª–∏–≤, 5-—Å–≤–µ—Ç, 15-DHT22

–°–µ—Ä–≤–µ—Ä: Python/FastAPI, –ø–æ—Ä—Ç 8000, IP: 192.168.0.11

–ë–∞–∑–∞: PostgreSQL, Docker

–°–µ—Ç–∏: WiFi JR/qazwsxedc

–î–µ–ø–ª–æ–π: Ubuntu + systemd + –∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–°–ò–°–¢–ï–ú–ù–´–ï –°–ï–†–í–ò–°–´
bash
smart-watering-system.service      # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
watering-deploy-agent.service      # –ê–≤—Ç–æ-–¥–µ–ø–ª–æ–π –∞–≥–µ–Ω—Ç

–ü–ï–†–ï–ú–ï–ù–ù–´–ï –û–ö–†–£–ñ–ï–ù–ò–Ø
GITHUB_TOKEN # GitHub API —Ç–æ–∫–µ–Ω

–ü–û–°–õ–ï–î–ù–ò–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–µ –≤—Ä–µ–º—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ EEPROM

‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω –¥–∞—Ç—á–∏–∫ DHT22 (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞/–≤–ª–∞–∂–Ω–æ—Å—Ç—å –≤–æ–∑–¥—É—Ö–∞)

‚úÖ –ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ–ª–µ –¥–ª—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ-—Ä–∞–∑–æ–º–∫–Ω—É—Ç—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

‚úÖ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–µ–Ω—Å–æ—Ä–æ–≤

‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω + –∞–≤—Ç–æ-–¥–µ–ø–ª–æ–π —Å–∏—Å—Ç–µ–º–∞

‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω poll-–∞–≥–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
text
smart-watering-system/
‚îú‚îÄ‚îÄ firmware/           # ESP32 –ø—Ä–æ—à–∏–≤–∫–∞
‚îú‚îÄ‚îÄ server/             # FastAPI —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ web/                # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å  
‚îú‚îÄ‚îÄ docs/               # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ scripts/            # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ deploy.sh           # –°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
‚îî‚îÄ‚îÄ deploy_agent.py     # –ê–≥–µ–Ω—Ç –∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
üîß –ê–≤—Ç–æ-–¥–µ–ø–ª–æ–π —Å–∏—Å—Ç–µ–º–∞
–°–µ—Ä–≤–∏—Å—ã systemd:
smart-watering-system.service - –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

watering-deploy-agent.service - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ GitHub –∏ –∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏: 1 –º–∏–Ω—É—Ç–∞

–í–µ—Ç–∫–∞: main

–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: GitHub Personal Access Token

–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: journalctl

–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
bash
# –°–µ—Ä–≤–µ—Ä
cd server && python3 main.py

# ESP32  
cd firmware && pio run --target upload

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–∏—Å–æ–≤
sudo systemctl status smart-watering-system watering-deploy-agent

# –õ–æ–≥–∏ –¥–µ–ø–ª–æ–π –∞–≥–µ–Ω—Ç–∞
sudo journalctl -u watering-deploy-agent.service -f
üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
GitHub —Ç–æ–∫–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è systemd —Å–µ—Ä–≤–∏—Å–∞:

bash
sudo systemctl edit watering-deploy-agent.service
[Service]
Environment=GITHUB_TOKEN=" secret token "
üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

–°–µ—Ä–≤–µ—Ä: http://192.168.0.11:8000

Device ID: esp32_01

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/aspinozaxxx-lab/smart-watering-system

üéØ Current Status - STABLE
‚úÖ What's Working:
ESP32 OOP Architecture - Complete modular refactoring

Sensor Reading - DHT22 (temperature/humidity) and Soil Moisture

Actuator Control - Relays for water pump and grow light

Server Communication - HTTP API to FastAPI backend

Autonomous Operation - Works offline with settings persistence

System Monitoring - Memory, uptime, diagnostics

Auto-deployment - GitHub monitoring with authenticated API

üîß Technical Stack:
ESP32 with PlatformIO

C++ OOP with proper inheritance and composition

FastAPI backend on 192.168.0.11:8000

PostgreSQL database

WiFi + OTA updates support

Systemd services for auto-start

GitHub API for auto-deployment

üìÅ Module Structure:
firmware/src/
‚îú‚îÄ‚îÄ Sensors/ # Sensor abstractions
‚îú‚îÄ‚îÄ Actuators/ # Relay and pump control
‚îú‚îÄ‚îÄ Network/ # WiFi, OTA, HTTP
‚îú‚îÄ‚îÄ System/ # Settings, tasks, monitoring
‚îî‚îÄ‚îÄ Application.h/cpp # Main system coordinator


