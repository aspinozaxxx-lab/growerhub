# üå± GrowerHub - –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É—Ö–æ–¥–∞ –∑–∞ —Ä–∞—Å—Ç–µ–Ω–∏—è–º–∏
![Firmware CI](https://github.com/aspinozaxxx-lab/growerhub/actions/workflows/ci-firmware.yml/badge.svg) 
![Server CI/CD](https://github.com/aspinozaxxx-lab/growerhub/actions/workflows/ci-cd.yml/badge.svg)<br>
![PlatformIO](https://img.shields.io/badge/platformio-ESP32-orange?logo=platformio)
![PlatformIO](https://img.shields.io/badge/platformio-ESP8266-blue?logo=platformio)<br>
![C++](https://img.shields.io/badge/language-C++17-blue?logo=c%2B%2B)
![Python](https://img.shields.io/badge/python-3.11+-blue?logo=python&logoColor=white)
![Lines of code](https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/aspinozaxxx-lab/growerhub/main/.github/metrics/loc-badge.json)<br>
![Ansible](https://img.shields.io/badge/ansible-automation-black?logo=ansible)
![FastAPI](https://img.shields.io/badge/fastapi-uvicorn%2Bgunicorn-009688?logo=fastapi)<br>
![Last Commit](https://img.shields.io/github/last-commit/aspinozaxxx-lab/growerhub)
![Coverage](https://img.shields.io/endpoint?url=https%3A%2F%2Fraw.githubusercontent.com%2Faspinozaxxx-lab%2Fgrowerhub%2Fmain%2F.github%2Fmetrics%2Fcoverage-badge.json)


## üìö –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞](#–æ–ø–∏—Å–∞–Ω–∏–µ-–ø—Ä–æ–µ–∫—Ç–∞)
- [üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [üõ†Ô∏è –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ-–ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å MVP](#-–∞–ø–ø–∞—Ä–∞—Ç–Ω–æ-–ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π-–∫–æ–º–ø–ª–µ–∫—Å-mvp)
- [üíª –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è —á–∞—Å—Ç—å](#-–ø—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è-—á–∞—Å—Ç—å)
- [üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
  - [‚öôÔ∏è –°–µ—Ä–≤–µ—Ä–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Proxmox VE, PostgreSQL, pgAdmin)](#Ô∏è-—Å–µ—Ä–≤–µ—Ä–Ω–∞—è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-proxmox-ve-postgresql-pgadmin)
- [üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [üîß –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã](#-—Å–∏—Å—Ç–µ–º–Ω—ã–µ-—Å–µ—Ä–≤–∏—Å—ã)
- [üîí –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [üìù –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è](#-–ø–æ—Å–ª–µ–¥–Ω–∏–µ-–∏–∑–º–µ–Ω–µ–Ω–∏—è)
- [üéØ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è](#-–ø–ª–∞–Ω—ã-—Ä–∞–∑–≤–∏—Ç–∏—è)
- [üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã](#-–∫–æ–Ω—Ç–∞–∫—Ç—ã)

---

## üìù –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

GrowerHub ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø–æ–ª–∏–≤–∞ —Ä–∞—Å—Ç–µ–Ω–∏–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

MVP Grovika ‚Äî –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ-–ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∫–æ–º–ø–ª–µ–∫c, –≤–∫–ª—é—á–∞—é—â–∏–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, —Å—Ç–∏–ª—å–Ω—É—é —É–ø–∞–∫–æ–≤–∫—É, —Å–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –∏ –ª–µ–≥–∫–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ –∫–æ–Ω–µ—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

---

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏ —Ä—É—á–Ω–æ–π –ø–æ–ª–∏–≤  
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ–º  
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞  
- OTA-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è  
- –ê–≤—Ç–æ-–¥–µ–ø–ª–æ–π (GitHub Actions)  
- –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Ansible  
- DeviceID –Ω–∞ –æ—Å–Ω–æ–≤–µ MAC-–∞–¥—Ä–µ—Å–∞  
- –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç (–≤ –ø–ª–∞–Ω–∞—Ö)  

---

## üõ†Ô∏è –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ-–ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å MVP Grovika

**–í –∫–æ–º–ø–ª–µ–∫—Ç –≤—Ö–æ–¥—è—Ç:**
- —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ  
- –Ω–∞—Å–æ—Å  
- —Ä–µ–ª–µ  
- –¥–∞—Ç—á–∏–∫ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ –ø–æ—á–≤—ã  
- –∫–∞–±–µ–ª–∏, –±–ª–æ–∫ –ø–∏—Ç–∞–Ω–∏—è  
- –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∏ —É–ø–∞–∫–æ–≤–∫–∞  

**–†–∞—Å—à–∏—Ä–µ–Ω–∏—è:**
- —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–µ—Ç–æ–º  
- –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã  

---

## üíª –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è —á–∞—Å—Ç—å

- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:** ESP32 (PlatformIO)  
- **–°–µ—Ä–≤–µ—Ä:** FastAPI + PostgreSQL  
- **–í–µ–±:** –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞  
- **CI/CD:** GitHub Actions  

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### ESP32
- DeviceID –ø–æ MAC  
- –ü–∏–Ω—ã: 34 –ø–æ—á–≤–∞, 4 –Ω–∞—Å–æ—Å, 5 —Å–≤–µ—Ç, 15 DHT22  
- RTC, OTA, EEPROM  

---

## ‚öôÔ∏è –°–µ—Ä–≤–µ—Ä–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Proxmox VE, PostgreSQL, pgAdmin)

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ Proxmox VE. –†–æ–ª–∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Ä–∞–∑–Ω–æ—Å—è—Ç—Å—è –ø–æ –æ—Ç–¥–µ–ª—å–Ω—ã–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –º–∞—à–∏–Ω–∞–º.

### –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã

| –í–ú | IP | –ì—Ä—É–ø–ø—ã | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|----|----|--------|------------|
| growerhub | 192.168.0.11 | app | FastAPI backend |
| ansible-host | 192.168.0.80 | ansible_host | –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä Ansible |
| gh-db | 192.168.0.81 | gh_db | PostgreSQL |
| gh-app | 192.168.0.82 | gh_app | –ë—É–¥—É—â–∏–π app-—Å–µ—Ä–≤–µ—Ä |
| gh-nginx | 192.168.0.83 | gh_nginx | Nginx / reverse proxy |
| gh-mqtt | 192.168.0.84 | gh_mqtt | MQTT –±—Ä–æ–∫–µ—Ä |
| gh-tools | 192.168.0.85 | gh_tools | pgAdmin –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã |

---

### PostgreSQL (gh-db)

- –•–æ—Å—Ç: `192.168.0.81`  
- –ü–æ—Ä—Ç: `5432`  
- –ë–∞–∑–∞: `gh_db`  
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `db-admin`  
- Trusted clients: 192.168.0.11, 192.168.0.85  
- –ü–ª–µ–π–±—É–∫: `playbooks/gh_db_install.yml`  

#### –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

Name: gh-db
Host: 192.168.0.81
Port: 5432
Maintenance DB: gh_db
Username: db-admin
Password: gh_db_admin_dev_1234

---

### pgAdmin (gh-tools)

- URL: **http://192.168.0.85:5050**  
- Email: `admin@growerhub.dev`  
- –ü–ª–µ–π–±—É–∫: `playbooks/gh_tools_pgadmin.yml`  

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

growerhub/<br>
‚îú‚îÄ‚îÄ firmware/<br>
‚îú‚îÄ‚îÄ server/<br>
‚îú‚îÄ‚îÄ ansible/<br>
‚îú‚îÄ‚îÄ web/<br>
‚îú‚îÄ‚îÄ docs/<br>
‚îú‚îÄ‚îÄ scripts/<br>
‚îú‚îÄ‚îÄ deploy.sh<br>
‚îî‚îÄ‚îÄ deploy_agent.py

---

## –ö–æ–º–∞–Ω–¥—ã

üîß –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥<br>
sudo -n /usr/bin/docker logs -f --tail=200 growerhub-java-backend<br>
–ü—Ä–æ—Å–º–æ—Ç—Ä –æ—á–µ—Ä–µ–¥–µ–π MQTT<br>
mosquitto_sub -h localhost -p 1883 -u mosquitto-admin -P qazwsxedc -t 'gh/#' -v

‚öôÔ∏è –ó–∞–ø—É—Å–∫ –ø–ª–µ–π–±—É–∫–æ–≤ Ansible<br>
ansible-playbook -i inventory/hosts.ini playbooks/gh_tools_pgadmin.yml<br>
ansible-playbook -i inventory/hosts.ini playbooks/fastapi.yml -K --ask-vault-pass



üîí –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è<br>
sudo systemctl edit watering-deploy-agent.service

[Service]
Environment=GITHUB_TOKEN="secret token"

üìù –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è<br>
- –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ Proxmox VE, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã –≤—Å–µ –í–ú, –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã Ansible, –ë–î –∏ tools<br>
- –î–æ–±–∞–≤–ª–µ–Ω –Ω–∞–¥–µ–∂–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤ Grovika<br>
- –ù–∞—Å—Ç—Ä–æ–µ–Ω —Å–µ—Ä–≤–µ—Ä LLM –¥–ª—è —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞ GrowerHub<br>
- –û—Ç–ª–∞–∂–µ–Ω–æ OTA<br>
- –ü—Ä–æ—Ä–∞–±–æ—Ç–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ Tuya


üéØ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è<br>
- –û—Ç–ª–∞–¥–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Tuya<br>
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –ø—Ä–∏ –≤–Ω–µ—Å–µ–Ω–∏–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π (Alembic)
- –§–∏—á–∞: –ñ—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π –ø–æ —É—Ö–æ–¥—É –∑–∞ —Ä–∞—Å—Ç–µ–Ω–∏–µ–º<br>
- –§–∏—á–∞: –ì—Ä–∞—Ñ–∏–∫–∏ –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ —Å–∞–π—Ç–µ<br>
- –§–∏—á–∞: –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç<br>
- –§–∏—á–∞: –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ä–∞—Å—Ç–µ–Ω–∏–π –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤<br>

üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã<br>
email: wizi1@yandex.ru, aspinoza.xxx@gmail.com<br>
–í–µ–±: https://growerhub.ru<br>
–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/aspinozaxxx-lab/growerhub
